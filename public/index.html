<!doctype html>
<html lang="en">

<head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" integrity="sha512-07I2e+7D8p6he1SIM+1twR5TIrhUQn9+I6yjqD53JQjFiMf8EtC93ty0/5vJTZGF8aAocvHYNEDJajGdNx1IsQ==" crossorigin="" />

    <link rel="stylesheet" href="css/main.css" type="text/css">
    <script src="bower_components/jquery/dist/jquery.min.js" type="text/javascript"></script>

    <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js" integrity="sha512-A7vV8IFfih/D732iSSKi20u/ooOfj/AGehOKq0f4vLT1Zr2Y+RX7C+w8A1gaSasGtRUZpF/NZgzSAu4/Gc41Lg==" crossorigin=""></script>
    <script src="js/heatmap.js" type="text/javascript"></script>
    <title>Threshold</title>
</head>

<body>

    <div id="map" class="map"></div>
    <div id="overlay_container" class="overlays">
        <div class="overlay_content">
          <div class="logo"></div>
          <div class="divider"></div>
          <div class="contact_info">
            <div class="fgroup">
            <div class="flabel">Contact Name:</div>
            <div id="namev" class="fvalue">test</div>
          </div>
          <div class="fgroup">
            <div class="flabel">Status:</div>
            <div id="statusv" class="fvalue">test</div>
            </div>
            <div class="fgroup">
            <div class="flabel">Latitude:</div>
            <div id="latv" class="fvalue">test</div>
            </div>
            <div class="fgroup">
            <div class="flabel">Longitude:</div>
            <div id="longv" class="fvalue">test</div>
            </div>
            <div class="fgroup">
            <div class="flabel">Address:</div>
            <div id="addressv" class="fvalue">test</div>
            </div>
            <div class="fgroup">
            <div class="flabel">Contact Info:</div>
            <div id="contactv" class="fvalue">test</div>
            </div>
          </div>
      </div>
      <div id="overlay_button" class="ol_button"></div>

    </div>
    <script type="text/javascript">
        var panelopen = true;
        var points = [];
        var map = L.map('map').setView([37.395728, -122.148348], 4);

        L.tileLayer('https://mt0.google.com/vt/lyrs=r&x={x}&y={y}&z={z}', {
            attribution: 'Google',
            maxZoom: 22
        }).addTo(map);

        //custom marker icons
        //80-100
        var m1Icon = L.icon({
            iconUrl: 'img/markers/m1.png',
            iconSize: [22, 42]
        });
        //60-79
        var m2Icon = L.icon({
            iconUrl: 'img/markers/m2.png',
            iconSize: [22, 42]
        });
        //40-69
        var m3Icon = L.icon({
            iconUrl: 'img/markers/m3.png',
            iconSize: [22, 42]
        });
        //20-39
        var m4Icon = L.icon({
            iconUrl: 'img/markers/m4.png',
            iconSize: [22, 42]
        });
        //0-19
        var m5Icon = L.icon({
            iconUrl: 'img/markers/m5.png',
            iconSize: [22, 42]
        });

        $.getJSON("data/fires.json", function(data) {
              points = [];
            for (var i = 0; i < data.length; i++) {
              points.push([data[i].latitude, data[i].longitude, data[i].confidence]);
              // if (data[i].confidence < 100 && data[i].confidence >= 80) {
              //
              //   // var marker = new L.marker([data[i].latitude, data[i].longitude], {
              //   //     icon: m5Icon
              //   // });
              //   // map.addLayer(marker);
              // } else if (data[i].confidence < 80 && data[i].confidence >= 60) {
              //   // var marker = new L.marker([data[i].latitude, data[i].longitude], {
              //   //     icon: m4Icon
              //   // });
              //   // map.addLayer(marker);
              // } else if (data[i].confidence < 60 && data[i].confidence >= 40) {
              //   // var marker = new L.marker([data[i].latitude, data[i].longitude], {
              //   //     icon: m3Icon
              //   // });
              //   // map.addLayer(marker);
              // } else if (data[i].confidence < 40 && data[i].confidence >= 20) {
              //   // var marker = new L.marker([data[i].latitude, data[i].longitude], {
              //   //     icon: m2Icon
              //   // });
              //   // map.addLayer(marker);
              // } else if (data[i].confidence < 20 && data[i].confidence >= 0) {
              //   // var marker = new L.marker([data[i].latitude, data[i].longitude], {
              //   //     icon: m1Icon
              //   // });
              //   // map.addLayer(marker);
              // }
            }
            var heat = L.heatLayer(points).addTo(map);
        });

        $('.map').css('height', $(window).height());
        $('.overlays').css('height', $(window).height());

    </script>
    <script src="js/panel.js" type="text/javascript"></script>
</body>

</html>
